{% extends 'base.html.twig' %}

{% block title %}
	Commentaires -
	{{ post.title }}
{% endblock %}

{% block body %}
	<div class="show-post">
		<h1>{{ post.title }}</h1>

		<div class="row">
			<div class="col-md-8">
				<section class="mb-5">
					{% for commentaire in commentaires %}
						<div class="card w-100 mt-4 mb-4">
							<div class="card-body">
								<h5 class="card-title card-title-commentaire">
									{{ commentaire.user }}
									<span class="date-commentaire">
										|
										{{ commentaire.createdAt|date('d/m/Y à H:i') }}
									</span>
								</h5>
								<p class="card-text">
									<i class="fas fa-caret-right me-1"></i>
									{{ commentaire.content }}
								</p>
							</div>
						</div>
					{% endfor %}
				</section>

				<div class="navigation">
					{{ knp_pagination_render(commentaires) }}
				</div>
			</div>

			<div class="col-md-4 mt-4 mr-1">
				<section class="shadow bg-white p-5 rounded position-fixed">
					{% if app.user %}

						<section>
							{% for message in app.flashes('error') %}
								{{ message }}
							{% endfor %}
						</section>

						{{ form_start(commentaireForm) }}
						<div class="row mt-2">
							{{ form_row(commentaireForm.content) }}
							{{ form_row(commentaireForm.submit) }}
						</div>
						{{ form_end(commentaireForm) }}

					{% else %}
						<p>
							Pour écrire un commentaire, veuillez
							<a href="{{ path('app_login') }}">vous connecter</a>.
						</p>
					</section>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
